# Пример проекта на централизованном CI с использованием helm subcharts

В проекте реализован ci на основе централизованного ci с созданием review окружений для feature веток и механизмом копирования в review окружения БД с development стенда.

Чарт helm находится в .infra/helm, сабчарты в .infra/helm/charts

Для подключения сабчарта в чарт, его нужно описать в .infra/helm/Chart.yaml. Один из основных параметров - условие включения чарта (condition).

При помощи условия включения чарта мы можем управлять его выкатом, передавая условие Helm через директиву --set (например --set "minio.enabled=${MINIO:-false}").

Чтобы переопределить переменную сабчарта в values основного чарта (.infra/helm/values.yaml), нужно подставить префикс с именем сабчарта. Например:

```
rabbitmq:
  rmq:
    pvc:
      size:
        _default: '2Gi'
```